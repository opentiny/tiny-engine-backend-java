<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tinyengine.it.mapper.UsersMapper">

    <!-- 通用设置 -->

        <!-- 通用查询列 -->
        <sql id="Base_Column_List">
            id, username, email, enable, created_by, last_updated_by, created_time, last_updated_time, tenant_id, site_id, is_admin, is_public
        </sql>

        <!-- 通用条件列 -->
        <sql id="UsersByCondition">
                    <if test="username!=null and username!=''">
                        AND username = #{username}
                    </if>
                    <if test="email!=null and email!=''">
                        AND email = #{email}
                    </if>
                    <if test="enable!=null and enable!=''">
                        AND enable = #{enable}
                    </if>
                    <if test="createdBy!=null and createdBy!=''">
                        AND created_by = #{createdBy}
                    </if>
                    <if test="lastUpdatedBy!=null and lastUpdatedBy!=''">
                        AND last_updated_by = #{lastUpdatedBy}
                    </if>
                    <if test="createdTime!=null and createdTime!=''">
                        AND created_time = #{createdTime}
                    </if>
                    <if test="lastUpdatedTime!=null and lastUpdatedTime!=''">
                        AND last_updated_time = #{lastUpdatedTime}
                    </if>
                    <if test="tenantId!=null and tenantId!=''">
                        AND tenant_id = #{tenantId}
                    </if>
                    <if test="siteId!=null and siteId!=''">
                        AND site_id = #{siteId}
                    </if>
                    <if test="isAdmin!=null and isAdmin!=''">
                        AND is_admin = #{isAdmin}
                    </if>
                    <if test="isPublic!=null and isPublic!=''">
                        AND is_public = #{isPublic}
                    </if>
        </sql>

        <!-- 通用设置列 -->
        <sql id="UsersSetColumns">
                    <if test="username!=null and username!=''">
                        username = #{username},
                    </if>
                    <if test="email!=null and email!=''">
                        email = #{email},
                    </if>
                    <if test="enable!=null and enable!=''">
                        enable = #{enable},
                    </if>
                    <if test="createdBy!=null and createdBy!=''">
                        created_by = #{createdBy},
                    </if>
                    <if test="lastUpdatedBy!=null and lastUpdatedBy!=''">
                        last_updated_by = #{lastUpdatedBy},
                    </if>
                    <if test="createdTime!=null and createdTime!=''">
                        created_time = #{createdTime},
                    </if>
                    <if test="lastUpdatedTime!=null and lastUpdatedTime!=''">
                        last_updated_time = #{lastUpdatedTime},
                    </if>
                    <if test="tenantId!=null and tenantId!=''">
                        tenant_id = #{tenantId},
                    </if>
                    <if test="siteId!=null and siteId!=''">
                        site_id = #{siteId},
                    </if>
                    <if test="isAdmin!=null and isAdmin!=''">
                        is_admin = #{isAdmin},
                    </if>
                    <if test="isPublic!=null and isPublic!=''">
                        is_public = #{isPublic},
                    </if>
        </sql>



        <!-- 通用查询映射结果 -->
        <resultMap id="UsersMap" type="com.tinyengine.it.model.entity.Users">
                    <id column="id" property="id"/>
                    <result column="username" property="username"/>
                    <result column="email" property="email"/>
                    <result column="enable" property="enable"/>
                    <result column="created_by" property="createdBy"/>
                    <result column="last_updated_by" property="lastUpdatedBy"/>
                    <result column="created_time" property="createdTime"/>
                    <result column="last_updated_time" property="lastUpdatedTime"/>
                    <result column="tenant_id" property="tenantId"/>
                    <result column="site_id" property="siteId"/>
                    <result column="is_admin" property="isAdmin"/>
                    <result column="is_public" property="isPublic"/>
        </resultMap>

    <!-- 查询表t_users所有数据 -->
    <select id="findAllUsers" resultMap="UsersMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM t_users
    </select>

            <!-- 根据主键id查询表t_users信息 -->
            <select id="findUsersById" resultMap="UsersMap">
                SELECT
                <include refid="Base_Column_List"/>
                FROM t_users
                WHERE id=#{id}
            </select>

    <!-- 根据条件查询表t_users数据 -->
    <select id="findUsersByCondition" resultMap="UsersMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM t_users
        WHERE 1=1
        <include refid="UsersByCondition" />
    </select>

            <!-- 根据主键id删除表t_users数据 -->
            <delete id="deleteUsersById">
                DELETE FROM
                t_users
                WHERE id=#{id}
            </delete>

            <!-- 根据主键id更新表t_users数据 -->
            <update id="updateUsersById" parameterType="com.tinyengine.it.model.entity.Users">
                UPDATE t_users
                <set>
                    <include refid="UsersSetColumns"/>
                </set>
                WHERE
                id=#{id}
            </update>

            <!-- 新增表t_users数据 -->
            <insert id="createUsers">
                INSERT INTO t_users (
                    id
                    ,username
                    ,email
                    ,enable
                    ,created_by
                    ,last_updated_by
                    ,created_time
                    ,last_updated_time
                    ,tenant_id
                    ,site_id
                    ,is_admin
                    ,is_public
                ) VALUES (
                    #{id}
                    ,#{username}
                    ,#{email}
                    ,#{enable}
                    ,#{createdBy}
                    ,#{lastUpdatedBy}
                    ,#{createdTime}
                    ,#{lastUpdatedTime}
                    ,#{tenantId}
                    ,#{siteId}
                    ,#{isAdmin}
                    ,#{isPublic}
                )
            </insert>
</mapper>
